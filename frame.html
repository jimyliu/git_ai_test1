<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Image Frame Tool — 2025-12-30 18:05:22</title>
<style>
body,html{margin:0;padding:0;font-family:system-ui;background:#fafafa;color:#111;height:100%;}
header{padding:1rem;background:#fff;box-shadow:0 1px 4px rgba(0,0,0,0.1);display:flex;flex-wrap:wrap;gap:1rem;align-items:center;}
header > *{margin:0;}
#canvasContainer{display:flex;justify-content:center;align-items:center;flex:1;padding:1rem;}
canvas{max-width:100%;border:1px solid #ccc;}
input[type=range]{width:100px;}
.control-group{display:flex;align-items:center;gap:0.5rem;}
button{padding:0.5rem 1rem;border:none;background:#007aff;color:#fff;border-radius:4px;cursor:pointer;}
</style>
</head>
<body>
<header>
<input type="file" id="upload" accept="image/*">
<div class="control-group"><label>Frame Color:</label><input type="color" id="frameColor" value="#000000"></div>
<div class="control-group"><label>Thickness:</label><input type="range" id="frameThickness" min="0" max="100" value="10"></div>
<div class="control-group"><label>Font:</label><select id="fontFamily"></select></div>
<div class="control-group"><label>Text Color:</label><input type="color" id="textColor" value="#ffffff"></div>
<div class="control-group"><label>Font Size:</label><input type="number" id="fontSize" min="14" max="800" value="48"></div>
<button id="presetBtn">Preset Caption</button>
<button id="randomStyle">Random Style</button>
<button id="exportBtn">Export PNG</button>
</header>
<div id="canvasContainer"><canvas id="canvas"></canvas></div>
<script>
const TIME = new Date();
const format2=(v)=>v.toString().padStart(2,'0');
document.title = `AI Image Frame Tool — ${TIME.getFullYear()}-${format2(TIME.getMonth()+1)}-${format2(TIME.getDate())} ${format2(TIME.getHours())}:${format2(TIME.getMinutes())}:${format2(TIME.getSeconds())}`;

const canvas = document.getElementById("canvas"),ctx=canvas.getContext("2d");
let img = new Image();
let texts = [
{text:"Title",x:0,y:0,dragging:false},
{text:"Subtitle",x:0,y:0,dragging:false}
];
let currentDrag=null;

const fonts=[
""PingFang TC","PingFangTC-Regular","Heiti TC",system-ui,sans-serif",
""PingFangTC-Regular",system-ui,sans-serif",
""PingFangTC-Medium",system-ui,sans-serif",
""PingFangTC-Semibold",system-ui,sans-serif",
""Heiti TC Light",system-ui,sans-serif",
""Heiti TC Medium",system-ui,sans-serif",
""Songti TC Regular",system-ui,serif",
""Songti TC Bold",system-ui,serif",
""Kaiti TC",system-ui,serif",
"system-ui","Arial","Helvetica"
];
const fontSelect=document.getElementById("fontFamily");
fonts.forEach(f=>{let o=document.createElement("option");o.value=f;o.textContent=f;o.style.fontFamily=f;fontSelect.appendChild(o);});

function draw(){
if(!img.width) return;
canvas.width=img.width;
canvas.height=img.height;
ctx.drawImage(img,0,0);
let th = parseInt(document.getElementById("frameThickness").value);
ctx.fillStyle = document.getElementById("frameColor").value;
ctx.fillRect(0,0,canvas.width,th);
ctx.fillRect(0,canvas.height-th,canvas.width,th);
ctx.fillRect(0,0,th,canvas.height);
ctx.fillRect(canvas.width-th,0,th,canvas.height);
texts.forEach((t,i)=>{
ctx.font=`${document.getElementById("fontSize").value}px ${fontSelect.value}`;
ctx.fillStyle=document.getElementById("textColor").value;
ctx.textAlign="center";
ctx.fillText(t.text,t.x||canvas.width/2,(t.y||((i+1)*(canvas.height/(texts.length+1)))));
});
}

document.getElementById("upload").onchange=e=>{
const file=e.target.files[0];
if(!file) return;
const reader=new FileReader();
reader.onload=()=>{img.src=reader.result;}
reader.readAsDataURL(file);
};
img.onload=()=>{
texts[0].x=canvas.width/2;
texts[0].y=canvas.height*0.2;
texts[1].x=canvas.width/2;
texts[1].y=canvas.height*0.8;
draw();
};

["frameColor","frameThickness","textColor","fontSize"].forEach(id=>document.getElementById(id).oninput=draw);
fontSelect.onchange=draw;

let presetTexts=["Hello World","Subtitle Here","Welcome","Your Caption","AI Generated"];
document.getElementById("presetBtn").onclick=()=>{
texts[0].text = presetTexts[Math.floor(Math.random()*presetTexts.length)];
texts[1].text = presetTexts[Math.floor(Math.random()*presetTexts.length)];
draw();
};

document.getElementById("randomStyle").onclick=()=>{
fontSelect.selectedIndex=Math.floor(Math.random()*fontSelect.options.length);
document.getElementById("textColor").value = '#'+Math.floor(Math.random()*16777215).toString(16);
document.getElementById("fontSize").value = Math.floor(Math.random()*(800-14)+14);
draw();
};

document.getElementById("exportBtn").onclick=()=>{
const a = document.createElement("a");
a.download="framed.png";
a.href=canvas.toDataURL("image/png");
a.click();
};

function getMousePos(e){
const rect=canvas.getBoundingClientRect();
let x=(e.clientX||e.touches[0].clientX)-rect.left;
let y=(e.clientY||e.touches[0].clientY)-rect.top;
let scale=canvas.width/rect.width;
return {x:x*scale,y:y*scale};
}

canvas.addEventListener("mousedown",startDrag);
canvas.addEventListener("touchstart",startDrag);
canvas.addEventListener("mousemove",doDrag);
canvas.addEventListener("touchmove",doDrag);
canvas.addEventListener("mouseup",endDrag);
canvas.addEventListener("touchend",endDrag);

function startDrag(e){
e.preventDefault();
let pos=getMousePos(e);
texts.forEach(t=>{
let w=ctx.measureText(t.text).width, h=parseInt(document.getElementById("fontSize").value);
if(pos.x>=t.x-w/2 && pos.x<=t.x+w/2 && pos.y>=t.y-h && pos.y<=t.y){
t.dragging=true; currentDrag=t;
}
});
}
function doDrag(e){
if(!currentDrag) return;
e.preventDefault();
let pos=getMousePos(e);
currentDrag.x=pos.x; currentDrag.y=pos.y;
draw();
}
function endDrag(){if(currentDrag) currentDrag.dragging=false; currentDrag=null;} </script>

</body>
</html>
