<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>AI-Style Image Frame Tool</title>
<style>
  :root {
    --bg: #f5f6f8;
    --panel: #ffffff;
    --accent: #2563eb;
    --text: #1f2937;
    --shadow: 0 10px 25px rgba(0,0,0,0.08);
  }

  * { box-sizing: border-box; }

  body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
                 Roboto, Helvetica, Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
  }

  header {
    padding: 16px 24px;
    font-size: 18px;
    font-weight: 600;
  }

  main {
    max-width: 1200px;
    margin: 0 auto;
    padding: 16px;
    display: grid;
    grid-template-columns: 1fr 320px;
    gap: 20px;
  }

  @media (max-width: 900px) {
    main {
      grid-template-columns: 1fr;
    }
  }

  .canvas-wrapper {
    background: var(--panel);
    border-radius: 12px;
    box-shadow: var(--shadow);
    padding: 16px;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  canvas {
    max-width: 100%;
    height: auto;
    border-radius: 6px;
  }

  .controls {
    background: var(--panel);
    border-radius: 12px;
    box-shadow: var(--shadow);
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 14px;
  }

  .controls h3 {
    margin: 0 0 4px;
    font-size: 15px;
    font-weight: 600;
  }

  label {
    font-size: 13px;
    margin-bottom: 4px;
    display: block;
  }

  input[type="file"] {
    font-size: 13px;
  }

  input[type="text"] {
    width: 100%;
    padding: 8px 10px;
    font-size: 14px;
    border-radius: 6px;
    border: 1px solid #d1d5db;
  }

  input[type="range"] {
    width: 100%;
  }

  input[type="color"] {
    width: 40px;
    height: 28px;
    padding: 0;
    border: none;
    background: none;
  }

  .row {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  button {
    padding: 10px 14px;
    font-size: 14px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background: var(--accent);
    color: white;
    font-weight: 500;
  }

  button.secondary {
    background: #6b7280;
  }

  button:active {
    transform: translateY(1px);
  }

  .hint {
    font-size: 12px;
    color: #6b7280;
  }
</style>
</head>
<body>

<header>üñºÔ∏è AI-Style Image Frame Tool</header>

<main>
  <div class="canvas-wrapper">
    <canvas id="canvas"></canvas>
  </div>

  <div class="controls">
    <h3>Image</h3>
    <input type="file" id="imageInput" accept="image/*"/>

    <h3>Frame</h3>
    <div class="row">
      <label>Color</label>
      <input type="color" id="frameColor" value="#000000"/>
      <label>Thickness</label>
    </div>
    <input type="range" id="frameThickness" min="0" max="80" value="20"/>

    <h3>Title</h3>
    <input type="text" id="titleText" placeholder="Title text"/>
    <div class="row">
      <label>Color</label><input type="color" id="titleColor" value="#ffffff"/>
      <label>Size</label>
    </div>
    <input type="range" id="titleSize" min="14" max="72" value="36"/>

    <h3>Subtitle</h3>
    <input type="text" id="subtitleText" placeholder="Subtitle text"/>
    <div class="row">
      <label>Color</label><input type="color" id="subtitleColor" value="#ffffff"/>
      <label>Size</label>
    </div>
    <input type="range" id="subtitleSize" min="14" max="72" value="20"/>

    <h3>AI Assist (Browser-only)</h3>
    <button id="autoCenter">Auto-Center Text</button>
    <button id="randomStyle" class="secondary">Random Style</button>

    <h3>Export</h3>
    <button id="downloadBtn">Download PNG</button>

    <div class="hint">
      ‚Ä¢ Drag title/subtitle directly on canvas<br/>
      ‚Ä¢ Keeps original image ratio<br/>
      ‚Ä¢ Works in Chrome & Safari
    </div>
  </div>
</main>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let img = null;
let imgRatio = 1;

let title = {
  text: "",
  x: 0.5,
  y: 0.15,
  size: 36,
  color: "#ffffff"
};

let subtitle = {
  text: "",
  x: 0.5,
  y: 0.25,
  size: 20,
  color: "#ffffff"
};

let frameColor = "#000000";
let frameThickness = 20;

let dragging = null;

function resizeCanvas(w, h) {
  canvas.width = w;
  canvas.height = h;
}

function draw() {
  if (!img) {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    return;
  }

  ctx.clearRect(0,0,canvas.width,canvas.height);

  // image
  ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

  // frame
  if (frameThickness > 0) {
    ctx.strokeStyle = frameColor;
    ctx.lineWidth = frameThickness;
    ctx.strokeRect(
      frameThickness/2,
      frameThickness/2,
      canvas.width - frameThickness,
      canvas.height - frameThickness
    );
  }

  // title
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";

  ctx.fillStyle = title.color;
  ctx.font = `${title.size}px sans-serif`;
  ctx.fillText(title.text, canvas.width * title.x, canvas.height * title.y);

  // subtitle
  ctx.fillStyle = subtitle.color;
  ctx.font = `${subtitle.size}px sans-serif`;
  ctx.fillText(subtitle.text, canvas.width * subtitle.x, canvas.height * subtitle.y);
}

document.getElementById("imageInput").addEventListener("change", e => {
  const file = e.target.files[0];
  if (!file) return;

  const image = new Image();
  image.onload = () => {
    img = image;
    imgRatio = img.width / img.height;

    const maxW = 900;
    const w = Math.min(maxW, img.width);
    const h = w / imgRatio;

    resizeCanvas(w, h);
    draw();
  };

  image.src = URL.createObjectURL(file);
});

function bind(id, prop, obj) {
  document.getElementById(id).addEventListener("input", e => {
    obj[prop] = e.target.type === "range" ? Number(e.target.value) : e.target.value;
    draw();
  });
}

bind("titleText", "text", title);
bind("titleSize", "size", title);
bind("titleColor", "color", title);

bind("subtitleText", "text", subtitle);
bind("subtitleSize", "size", subtitle);
bind("subtitleColor", "color", subtitle);

document.getElementById("frameColor").addEventListener("input", e => {
  frameColor = e.target.value;
  draw();
});

document.getElementById("frameThickness").addEventListener("input", e => {
  frameThickness = Number(e.target.value);
  draw();
});

// drag text
canvas.addEventListener("mousedown", e => {
  const rect = canvas.getBoundingClientRect();
  const x = (e.clientX - rect.left) / canvas.width;
  const y = (e.clientY - rect.top) / canvas.height;

  if (Math.abs(y - title.y) < 0.05) dragging = title;
  else if (Math.abs(y - subtitle.y) < 0.05) dragging = subtitle;
});

canvas.addEventListener("mousemove", e => {
  if (!dragging) return;
  const rect = canvas.getBoundingClientRect();
  dragging.x = (e.clientX - rect.left) / canvas.width;
  dragging.y = (e.clientY - rect.top) / canvas.height;
  draw();
});

window.addEventListener("mouseup", () => dragging = null);

// AI-like helpers
document.getElementById("autoCenter").onclick = () => {
  title.x = subtitle.x = 0.5;
  title.y = 0.15;
  subtitle.y = 0.25;
  draw();
};

document.getElementById("randomStyle").onclick = () => {
  frameColor = "#" + Math.floor(Math.random()*16777215).toString(16);
  title.size = 28 + Math.random()*20;
  subtitle.size = 16 + Math.random()*12;
  draw();
};

document.getElementById("downloadBtn").onclick = () => {
  const link = document.createElement("a");
  link.download = "framed-image.png";
  link.href = canvas.toDataURL("image/png");
  link.click();
};
</script>

</body>
</html>
