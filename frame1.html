<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Browser Image Frame Tool</title>
<style>
  :root {
    --bg: #f4f6f8;
    --panel: #ffffff;
    --accent: #2563eb;
    --shadow: 0 10px 25px rgba(0,0,0,0.08);
    --radius: 14px;
    --font-ui: -apple-system, BlinkMacSystemFont, "Segoe UI",
               Roboto, "Helvetica Neue", Arial, sans-serif;
  }

  body {
    margin: 0;
    font-family: var(--font-ui);
    background: var(--bg);
    color: #111;
  }

  header {
    padding: 16px 20px;
    text-align: center;
    font-weight: 600;
    font-size: 18px;
  }

  main {
    display: flex;
    flex-direction: column;
    gap: 16px;
    padding: 16px;
    max-width: 1100px;
    margin: 0 auto;
  }

  .workspace {
    display: grid;
    grid-template-columns: 1fr 320px;
    gap: 16px;
  }

  @media (max-width: 900px) {
    .workspace {
      grid-template-columns: 1fr;
    }
  }

  .canvas-panel {
    background: var(--panel);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 12px;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: auto;
  }

  canvas {
    max-width: 100%;
    height: auto;
    background: #ddd;
    border-radius: 6px;
    touch-action: none;
  }

  .controls {
    background: var(--panel);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 14px;
    display: flex;
    flex-direction: column;
    gap: 14px;
  }

  .controls h3 {
    margin: 0;
    font-size: 15px;
  }

  .row {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    align-items: center;
  }

  label {
    font-size: 13px;
    color: #444;
  }

  input[type="text"],
  input[type="number"] {
    padding: 6px 8px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 14px;
    flex: 1;
  }

  input[type="color"] {
    width: 36px;
    height: 36px;
    border: none;
    background: none;
    padding: 0;
  }

  input[type="range"] {
    flex: 1;
  }

  button {
    padding: 10px 14px;
    border-radius: 10px;
    border: none;
    background: var(--accent);
    color: #fff;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 6px 14px rgba(37,99,235,0.25);
  }

  button.secondary {
    background: #64748b;
    box-shadow: 0 6px 14px rgba(100,116,139,0.25);
  }

  .small {
    font-size: 12px;
    color: #555;
  }

  .hint {
    font-size: 12px;
    color: #666;
  }
</style>
</head>
<body>

<header>
  üñºÔ∏è Browser-Only Image Frame Tool
</header>

<main>
  <div class="workspace">
    <div class="canvas-panel">
      <canvas id="canvas" width="800" height="600"></canvas>
    </div>

    <div class="controls">
      <h3>Image</h3>
      <input type="file" accept="image/*" id="imageInput" />

      <h3>Frame</h3>
      <div class="row">
        <label>Color</label>
        <input type="color" id="frameColor" value="#000000" />
        <label>Thickness</label>
        <input type="range" id="frameThickness" min="0" max="60" value="20" />
      </div>

      <h3>Title</h3>
      <input type="text" id="titleText" placeholder="Title text" />
      <div class="row">
        <label>Color</label>
        <input type="color" id="titleColor" value="#ffffff" />
        <label>Size</label>
        <input type="number" id="titleSize" value="48" />
      </div>

      <h3>Subtitle</h3>
      <input type="text" id="subtitleText" placeholder="Subtitle text" />
      <div class="row">
        <label>Color</label>
        <input type="color" id="subtitleColor" value="#ffffff" />
        <label>Size</label>
        <input type="number" id="subtitleSize" value="28" />
      </div>

      <h3>AI-like Helpers</h3>
      <button id="autoLayout">Auto-Center & Smart Size</button>
      <button id="randomStyle" class="secondary">Random Style</button>

      <h3>Export</h3>
      <button id="downloadBtn">Download PNG</button>

      <div class="hint">
        ‚Ä¢ Drag title or subtitle directly on the image<br />
        ‚Ä¢ Works in Chrome & Safari<br />
        ‚Ä¢ Everything runs locally in your browser
      </div>
    </div>
  </div>
</main>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let image = null;
let imageRatio = 1;

let title = {
  text: "",
  x: canvas.width / 2,
  y: canvas.height * 0.2,
  color: "#ffffff",
  size: 48,
  dragging: false
};

let subtitle = {
  text: "",
  x: canvas.width / 2,
  y: canvas.height * 0.3,
  color: "#ffffff",
  size: 28,
  dragging: false
};

function resizeCanvasForImage(img) {
  const maxW = 1000;
  const maxH = 800;
  let w = img.width;
  let h = img.height;
  const ratio = w / h;

  if (w > maxW) {
    w = maxW;
    h = w / ratio;
  }
  if (h > maxH) {
    h = maxH;
    w = h * ratio;
  }
  canvas.width = w;
  canvas.height = h;
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  if (image) {
    ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
  }

  const frameThickness = +frameThicknessInput.value;
  if (frameThickness > 0) {
    ctx.strokeStyle = frameColorInput.value;
    ctx.lineWidth = frameThickness;
    ctx.strokeRect(
      frameThickness / 2,
      frameThickness / 2,
      canvas.width - frameThickness,
      canvas.height - frameThickness
    );
  }

  drawText(title);
  drawText(subtitle);
}

function drawText(t) {
  if (!t.text) return;
  ctx.font = `bold ${t.size}px sans-serif`;
  ctx.fillStyle = t.color;
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  ctx.fillText(t.text, t.x, t.y);
}

const imageInput = document.getElementById("imageInput");
imageInput.addEventListener("change", e => {
  const file = e.target.files[0];
  if (!file) return;
  const img = new Image();
  img.onload = () => {
    image = img;
    resizeCanvasForImage(img);
    autoLayout();
    draw();
  };
  img.src = URL.createObjectURL(file);
});

const frameColorInput = document.getElementById("frameColor");
const frameThicknessInput = document.getElementById("frameThickness");

const titleInput = document.getElementById("titleText");
const subtitleInput = document.getElementById("subtitleText");
const titleColorInput = document.getElementById("titleColor");
const subtitleColorInput = document.getElementById("subtitleColor");
const titleSizeInput = document.getElementById("titleSize");
const subtitleSizeInput = document.getElementById("subtitleSize");

function bindInputs() {
  titleInput.oninput = e => { title.text = e.target.value; draw(); };
  subtitleInput.oninput = e => { subtitle.text = e.target.value; draw(); };
  titleColorInput.oninput = e => { title.color = e.target.value; draw(); };
  subtitleColorInput.oninput = e => { subtitle.color = e.target.value; draw(); };
  titleSizeInput.oninput = e => { title.size = +e.target.value; draw(); };
  subtitleSizeInput.oninput = e => { subtitle.size = +e.target.value; draw(); };
  frameColorInput.oninput = draw;
  frameThicknessInput.oninput = draw;
}
bindInputs();

function autoLayout() {
  title.x = canvas.width / 2;
  subtitle.x = canvas.width / 2;
  title.y = canvas.height * 0.2;
  subtitle.y = canvas.height * 0.3;

  title.size = Math.round(canvas.width / 12);
  subtitle.size = Math.round(canvas.width / 22);

  titleSizeInput.value = title.size;
  subtitleSizeInput.value = subtitle.size;
}

document.getElementById("autoLayout").onclick = () => {
  autoLayout();
  draw();
};

document.getElementById("randomStyle").onclick = () => {
  const colors = ["#ffffff", "#facc15", "#38bdf8", "#f472b6"];
  title.color = colors[Math.floor(Math.random() * colors.length)];
  subtitle.color = colors[Math.floor(Math.random() * colors.length)];
  frameColorInput.value = colors[Math.floor(Math.random() * colors.length)];
  frameThicknessInput.value = Math.floor(Math.random() * 40) + 10;
  draw();
};

canvas.addEventListener("pointerdown", e => {
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  if (Math.abs(x - title.x) < 150 && Math.abs(y - title.y) < 40) {
    title.dragging = true;
  } else if (Math.abs(x - subtitle.x) < 150 && Math.abs(y - subtitle.y) < 30) {
    subtitle.dragging = true;
  }
});

canvas.addEventListener("pointermove", e => {
  if (!title.dragging && !subtitle.dragging) return;
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  if (title.dragging) {
    title.x = x;
    title.y = y;
  }
  if (subtitle.dragging) {
    subtitle.x = x;
    subtitle.y = y;
  }
  draw();
});

canvas.addEventListener("pointerup", () => {
  title.dragging = false;
  subtitle.dragging = false;
});

document.getElementById("downloadBtn").onclick = () => {
  const link = document.createElement("a");
  link.download = "framed-image.png";
  link.href = canvas.toDataURL("image/png");
  link.click();
};

draw();
</script>

</body>
</html>
