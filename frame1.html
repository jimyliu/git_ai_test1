<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>AI Image Frame Tool</title>

<style>
  :root {
    --panel-bg: #ffffff;
    --accent: #2563eb;
    --shadow: 0 10px 30px rgba(0,0,0,0.12);
    --radius: 14px;
  }

  body {
    margin: 0;
    padding: 24px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
                 Roboto, Helvetica, Arial, sans-serif;
    background: linear-gradient(180deg, #f3f4f6, #e5e7eb);
    color: #111827;
  }

  h1 {
    margin: 0 0 16px;
    font-size: 22px;
    font-weight: 600;
    text-align: center;
  }

  .app {
    max-width: 1100px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 320px 1fr;
    gap: 20px;
  }

  @media (max-width: 900px) {
    .app {
      grid-template-columns: 1fr;
    }
  }

  .panel {
    background: var(--panel-bg);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 16px;
  }

  .panel h2 {
    font-size: 14px;
    font-weight: 600;
    margin: 16px 0 8px;
    color: #374151;
  }

  .control {
    margin-bottom: 12px;
    font-size: 13px;
  }

  .control label {
    display: block;
    margin-bottom: 4px;
    color: #4b5563;
  }

  .control input[type="text"],
  .control input[type="number"] {
    width: 100%;
    padding: 8px 10px;
    border-radius: 8px;
    border: 1px solid #d1d5db;
    font-size: 13px;
  }

  .control input[type="range"] {
    width: 100%;
  }

  .row {
    display: flex;
    gap: 10px;
    align-items: center;
  }

  button {
    padding: 10px 14px;
    border-radius: 10px;
    border: none;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    background: var(--accent);
    color: #fff;
    box-shadow: 0 6px 14px rgba(37,99,235,0.35);
  }

  button.secondary {
    background: #6b7280;
    box-shadow: none;
  }

  button.full {
    width: 100%;
  }

  canvas {
    width: 100%;
    height: auto;
    border-radius: var(--radius);
    background: #fff;
    box-shadow: var(--shadow);
    touch-action: none;
  }

  .canvas-wrap {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .hint {
    font-size: 12px;
    color: #6b7280;
    margin-top: 4px;
  }
</style>
</head>

<body>
<h1>AI-Style Image Frame Tool</h1>

<div class="app">
  <!-- Controls -->
  <div class="panel">
    <div class="control">
      <label>Upload Image</label>
      <input type="file" id="imageInput" accept="image/*" />
    </div>

    <h2>Frame</h2>
    <div class="control row">
      <div style="flex:1">
        <label>Border Color</label>
        <input type="color" id="borderColor" value="#000000" />
      </div>
      <div style="flex:1">
        <label>Thickness</label>
        <input type="range" id="borderSize" min="0" max="80" value="20" />
      </div>
    </div>

    <h2>Title</h2>
    <div class="control">
      <label>Text</label>
      <input type="text" id="titleText" placeholder="Title text" />
    </div>
    <div class="control row">
      <div style="flex:1">
        <label>Color</label>
        <input type="color" id="titleColor" value="#ffffff" />
      </div>
      <div style="flex:1">
        <label>Size</label>
        <input type="range" id="titleSize" min="20" max="120" value="48" />
      </div>
    </div>

    <h2>Subtitle</h2>
    <div class="control">
      <label>Text</label>
      <input type="text" id="subtitleText" placeholder="Subtitle text" />
    </div>
    <div class="control row">
      <div style="flex:1">
        <label>Color</label>
        <input type="color" id="subtitleColor" value="#e5e7eb" />
      </div>
      <div style="flex:1">
        <label>Size</label>
        <input type="range" id="subtitleSize" min="14" max="80" value="26" />
      </div>
    </div>

    <h2>AI Assist</h2>
    <div class="control">
      <button id="randomStyle" class="full secondary">ðŸŽ¨ Random Style</button>
    </div>
    <div class="control">
      <button id="randomCaption" class="full secondary">âœ¨ Random Caption</button>
    </div>

    <h2>Export</h2>
    <button id="downloadBtn" class="full">â¬‡ Download PNG</button>

    <div class="hint">
      â€¢ Drag title or subtitle directly on canvas<br/>
      â€¢ Everything runs locally in your browser
    </div>
  </div>

  <!-- Canvas -->
  <div class="canvas-wrap">
    <canvas id="canvas"></canvas>
  </div>
</div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

let img = null;
let imgRatio = 1;

let title = {
  text: '',
  x: 0.5,
  y: 0.25,
  size: 48,
  color: '#ffffff'
};

let subtitle = {
  text: '',
  x: 0.5,
  y: 0.35,
  size: 26,
  color: '#e5e7eb'
};

let borderSize = 20;
let borderColor = '#000000';

let dragging = null;

function resizeCanvas() {
  if (!img) return;
  const maxW = canvas.parentElement.clientWidth;
  canvas.width = maxW;
  canvas.height = maxW / imgRatio;
  draw();
}

function draw() {
  if (!img) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

  // Frame
  if (borderSize > 0) {
    ctx.strokeStyle = borderColor;
    ctx.lineWidth = borderSize;
    ctx.strokeRect(
      borderSize / 2,
      borderSize / 2,
      canvas.width - borderSize,
      canvas.height - borderSize
    );
  }

  // Title
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillStyle = title.color;
  ctx.font = `bold ${title.size}px system-ui`;
  ctx.fillText(title.text, title.x * canvas.width, title.y * canvas.height);

  // Subtitle
  ctx.fillStyle = subtitle.color;
  ctx.font = `${subtitle.size}px system-ui`;
  ctx.fillText(subtitle.text, subtitle.x * canvas.width, subtitle.y * canvas.height);
}

function loadImage(file) {
  const reader = new FileReader();
  reader.onload = e => {
    img = new Image();
    img.onload = () => {
      imgRatio = img.width / img.height;
      resizeCanvas();
    };
    img.src = e.target.result;
  };
  reader.readAsDataURL(file);
}

// Inputs
imageInput.onchange = e => loadImage(e.target.files[0]);

titleText.oninput = e => { title.text = e.target.value; draw(); };
subtitleText.oninput = e => { subtitle.text = e.target.value; draw(); };

titleColor.oninput = e => { title.color = e.target.value; draw(); };
subtitleColor.oninput = e => { subtitle.color = e.target.value; draw(); };

titleSize.oninput = e => { title.size = +e.target.value; draw(); };
subtitleSize.oninput = e => { subtitle.size = +e.target.value; draw(); };

borderSize.oninput = e => { borderSize = +e.target.value; draw(); };
borderColor.oninput = e => { borderColor = e.target.value; draw(); };

// Dragging text
canvas.addEventListener('pointerdown', e => {
  const rect = canvas.getBoundingClientRect();
  const x = (e.clientX - rect.left) / canvas.width;
  const y = (e.clientY - rect.top) / canvas.height;

  if (Math.abs(y - title.y) < 0.05) dragging = title;
  else if (Math.abs(y - subtitle.y) < 0.05) dragging = subtitle;
});

canvas.addEventListener('pointermove', e => {
  if (!dragging) return;
  const rect = canvas.getBoundingClientRect();
  dragging.x = (e.clientX - rect.left) / canvas.width;
  dragging.y = (e.clientY - rect.top) / canvas.height;
  draw();
});

canvas.addEventListener('pointerup', () => dragging = null);
canvas.addEventListener('pointerleave', () => dragging = null);

// Download
downloadBtn.onclick = () => {
  const a = document.createElement('a');
  a.download = 'framed-image.png';
  a.href = canvas.toDataURL('image/png');
  a.click();
};

// AI-like helpers
const captions = [
  ['Live with Purpose', 'Every moment matters'],
  ['Faith Over Fear', 'Trust the journey'],
  ['One Step at a Time', 'Progress, not perfection'],
  ['Created to Shine', 'Let your light be seen'],
  ['Grace & Truth', 'Anchored in hope']
];

randomCaption.onclick = () => {
  const c = captions[Math.floor(Math.random() * captions.length)];
  title.text = c[0];
  subtitle.text = c[1];
  titleText.value = title.text;
  subtitleText.value = subtitle.text;
  draw();
};

randomStyle.onclick = () => {
  borderColor = '#' + Math.floor(Math.random()*16777215).toString(16);
  title.color = '#' + Math.floor(Math.random()*16777215).toString(16);
  subtitle.color = '#' + Math.floor(Math.random()*16777215).toString(16);
  borderSize = Math.floor(Math.random() * 50) + 10;

  borderColorInput = borderColor;
  borderSizeInput = borderSize;

  borderColor.value = borderColor;
  borderSize.value = borderSize;
  titleColor.value = title.color;
  subtitleColor.value = subtitle.color;

  draw();
};

window.addEventListener('resize', resizeCanvas);
</script>
</body>
</html>
