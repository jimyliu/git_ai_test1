<!DOCTYPE html>

<html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>AI Image Frame Tool — 2025-12-30 20:28:10</title> <style> :root { --bg-color: #f0f2f5; --panel-bg: #ffffff; --accent: #2563eb; --text: #1e293b; } body { font-family: system-ui, -apple-system, sans-serif; background-color: var(--bg-color); color: var(--text); margin: 0; display: flex; flex-direction: column; align-items: center; padding: 20px; } .container { display: flex; flex-wrap: wrap; gap: 20px; max-width: 1200px; width: 100%; justify-content: center; } #canvas-container { background: white; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border-radius: 8px; overflow: hidden; position: sticky; top: 20px; line-height: 0; cursor: crosshair; touch-action: none; } canvas { max-width: 100%; height: auto; } .controls { flex: 1; min-width: 320px; max-width: 450px; background: var(--panel-bg); padding: 24px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); display: flex; flex-direction: column; gap: 16px; } h1 { margin: 0 0 10px 0; font-size: 1.25rem; color: var(--accent); } .section { border-bottom: 1px solid #e2e8f0; padding-bottom: 16px; margin-bottom: 8px; } .section-title { font-weight: 700; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 12px; display: block; color: #64748b; } .control-group { display: flex; flex-direction: column; gap: 8px; margin-bottom: 12px; } .row { display: flex; gap: 10px; align-items: center; } .row label { flex: 1; font-size: 0.9rem; } input[type="text"], select { padding: 8px; border: 1px solid #cbd5e1; border-radius: 4px; width: 100%; } input[type="range"] { flex: 2; } .num-input { width: 60px; } button { padding: 10px 16px; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.2s; } .btn-primary { background: var(--accent); color: white; width: 100%; font-size: 1rem; } .btn-primary:hover { background: #1d4ed8; } .btn-secondary { background: #e2e8f0; color: var(--text); } .btn-random { background: #8b5cf6; color: white; } </style> </head> <body>

<h1>AI Image Frame Tool — 2025-12-30 20:28:10</h1>

<div class="container">
    <div id="canvas-container">
        <canvas id="mainCanvas"></canvas>
    </div>

    <div class="controls">
        <div class="section">
            <span class="section-title">1. Background Layer</span>
            <input type="file" id="bgInput" accept="image/*" class="control-group">
            <div class="row">
                <label>Opacity</label>
                <input type="range" id="bgOpacity" min="20" max="100" value="100">
            </div>
        </div>

        <div class="section">
            <span class="section-title">2. Main Image & Frame</span>
            <input type="file" id="mainInput" accept="image/*" class="control-group">
            <div class="row">
                <label>Opacity</label>
                <input type="range" id="mainOpacity" min="20" max="100" value="100">
            </div>
            <div class="row">
                <label>Frame Color</label>
                <input type="color" id="frameColor" value="#ffffff">
            </div>
            <div class="row">
                <label>Thickness</label>
                <input type="range" id="frameWidth" min="0" max="100" value="20">
            </div>
        </div>

        <div class="section">
            <span class="section-title">3. Title Text Layer</span>
            <input type="text" id="titleText" placeholder="Enter Title..." value="Memorable Moment">
            <div class="row">
                <select id="titleFont">
                    <optgroup label="Traditional Chinese">
                        <option value="'PingFang TC', 'PingFangTC-Regular', sans-serif">PingFang TC</option>
                        <option value="'Heiti TC', 'Heiti TC Light', sans-serif">Heiti TC</option>
                        <option value="'Songti TC', 'Songti TC Regular', serif">Songti TC</option>
                        <option value="'Kaiti TC', 'Kaiti TC Regular', serif">Kaiti TC</option>
                    </optgroup>
                    <optgroup label="System">
                        <option value="system-ui">System UI</option>
                        <option value="Arial">Arial</option>
                        <option value="Helvetica">Helvetica</option>
                    </optgroup>
                </select>
            </div>
            <div class="row">
                <input type="color" id="titleColor" value="#000000">
                <input type="range" id="titleSizeSlider" min="14" max="800" value="60">
                <input type="number" id="titleSizeNum" class="num-input" value="60">
            </div>
        </div>

        <div class="section">
            <span class="section-title">4. Subtitle Text Layer</span>
            <input type="text" id="subtitleText" placeholder="Enter Subtitle..." value="Dec 2025">
            <div class="row">
                <select id="subtitleFont">
                    <optgroup label="Traditional Chinese">
                        <option value="'PingFang TC', 'PingFangTC-Regular', sans-serif">PingFang TC</option>
                        <option value="'Heiti TC', 'Heiti TC Light', sans-serif">Heiti TC</option>
                        <option value="'Songti TC', 'Songti TC Regular', serif">Songti TC</option>
                        <option value="'Kaiti TC', 'Kaiti TC Regular', serif">Kaiti TC</option>
                    </optgroup>
                    <optgroup label="System">
                        <option value="system-ui">System UI</option>
                        <option value="Arial">Arial</option>
                        <option value="Helvetica">Helvetica</option>
                    </optgroup>
                </select>
            </div>
            <div class="row">
                <input type="color" id="subtitleColor" value="#333333">
                <input type="range" id="subtitleSizeSlider" min="14" max="800" value="30">
                <input type="number" id="subtitleSizeNum" class="num-input" value="30">
            </div>
        </div>

        <button class="btn-random" id="btnRandom">Random Style</button>
        <button class="btn-primary" id="btnExport">Export PNG</button>
    </div>
</div>

<script>
    const canvas = document.getElementById('mainCanvas');
    const ctx = canvas.getContext('2d');

    // State Management
    const state = {
        bg: { img: null, opacity: 1 },
        main: { img: null, x: 50, y: 50, w: 600, h: 400, opacity: 1, frameColor: '#ffffff', frameWidth: 20 },
        title: { text: "Memorable Moment", x: 400, y: 700, size: 60, color: '#000000', font: "'PingFang TC', sans-serif" },
        subtitle: { text: "Dec 2025", x: 400, y: 760, size: 30, color: '#333333', font: "'PingFang TC', sans-serif" },
        dragging: null,
        dragOffset: { x: 0, y: 0 }
    };

    // Initialize Canvas Size
    canvas.width = 1080;
    canvas.height = 1080;

    function render() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // 1. Background Layer
        if (state.bg.img) {
            ctx.globalAlpha = state.bg.opacity;
            const ratio = Math.max(canvas.width / state.bg.img.width, canvas.height / state.bg.img.height);
            const nw = state.bg.img.width * ratio;
            const nh = state.bg.img.height * ratio;
            ctx.drawImage(state.bg.img, (canvas.width - nw) / 2, (canvas.height - nh) / 2, nw, nh);
        } else {
            ctx.fillStyle = "#ffffff";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        // 2. Main Image Layer + Frame
        if (state.main.img) {
            ctx.globalAlpha = state.main.opacity;
            // Draw Frame
            if (state.main.frameWidth > 0) {
                ctx.fillStyle = state.main.frameColor;
                ctx.fillRect(
                    state.main.x - state.main.frameWidth,
                    state.main.y - state.main.frameWidth,
                    state.main.w + (state.main.frameWidth * 2),
                    state.main.h + (state.main.frameWidth * 2)
                );
            }
            ctx.drawImage(state.main.img, state.main.x, state.main.y, state.main.w, state.main.h);
        }

        // 3. Text Layers
        ctx.globalAlpha = 1.0;
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";

        ctx.font = `${state.title.size}px ${state.title.font}`;
        ctx.fillStyle = state.title.color;
        ctx.fillText(state.title.text, state.title.x, state.title.y);

        ctx.font = `${state.subtitle.size}px ${state.subtitle.font}`;
        ctx.fillStyle = state.subtitle.color;
        ctx.fillText(state.subtitle.text, state.subtitle.x, state.subtitle.y);

        requestAnimationFrame(drawLoop);
    }

    let needsUpdate = true;
    function drawLoop() {
        if (needsUpdate) {
            render();
            needsUpdate = false;
        }
    }

    function triggerUpdate() { needsUpdate = true; }

    // Interaction Logic
    function getMousePos(e) {
        const rect = canvas.getBoundingClientRect();
        const scaleX = canvas.width / rect.width;
        const scaleY = canvas.height / rect.height;
        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const clientY = e.touches ? e.touches[0].clientY : e.clientY;
        return {
            x: (clientX - rect.left) * scaleX,
            y: (clientY - rect.top) * scaleY
        };
    }

    canvas.addEventListener('mousedown', startDrag);
    canvas.addEventListener('touchstart', startDrag, {passive: false});
    window.addEventListener('mousemove', doDrag);
    window.addEventListener('touchmove', doDrag, {passive: false});
    window.addEventListener('mouseup', endDrag);
    window.addEventListener('touchend', endDrag);

    function startDrag(e) {
        const pos = getMousePos(e);
        
        // Hit Test Subtitle (on top)
        if (Math.abs(pos.x - state.subtitle.x) < 150 && Math.abs(pos.y - state.subtitle.y) < 40) {
            state.dragging = 'subtitle';
            state.dragOffset = { x: pos.x - state.subtitle.x, y: pos.y - state.subtitle.y };
        } 
        // Hit Test Title
        else if (Math.abs(pos.x - state.title.x) < 200 && Math.abs(pos.y - state.title.y) < 50) {
            state.dragging = 'title';
            state.dragOffset = { x: pos.x - state.title.x, y: pos.y - state.title.y };
        }
        // Hit Test Main Image + Frame
        else if (state.main.img && 
                 pos.x > state.main.x - state.main.frameWidth && 
                 pos.x < state.main.x + state.main.w + state.main.frameWidth &&
                 pos.y > state.main.y - state.main.frameWidth && 
                 pos.y < state.main.y + state.main.h + state.main.frameWidth) {
            state.dragging = 'main';
            state.dragOffset = { x: pos.x - state.main.x, y: pos.y - state.main.y };
        }
        if (state.dragging) e.preventDefault();
    }

    function doDrag(e) {
        if (!state.dragging) return;
        const pos = getMousePos(e);
        if (state.dragging === 'main') {
            state.main.x = pos.x - state.dragOffset.x;
            state.main.y = pos.y - state.dragOffset.y;
        } else if (state.dragging === 'title') {
            state.title.x = pos.x - state.dragOffset.x;
            state.title.y = pos.y - state.dragOffset.y;
        } else if (state.dragging === 'subtitle') {
            state.subtitle.x = pos.x - state.dragOffset.x;
            state.subtitle.y = pos.y - state.dragOffset.y;
        }
        triggerUpdate();
    }

    function endDrag() { state.dragging = null; }

    // Controls Binding
    document.getElementById('bgInput').addEventListener('change', (e) => {
        const reader = new FileReader();
        reader.onload = (f) => {
            const img = new Image();
            img.onload = () => { state.bg.img = img; triggerUpdate(); };
            img.src = f.target.result;
        };
        reader.readAsDataURL(e.target.files[0]);
    });

    document.getElementById('mainInput').addEventListener('change', (e) => {
        const reader = new FileReader();
        reader.onload = (f) => {
            const img = new Image();
            img.onload = () => {
                state.main.img = img;
                const scale = Math.min(600 / img.width, 600 / img.height);
                state.main.w = img.width * scale;
                state.main.h = img.height * scale;
                state.main.x = (canvas.width - state.main.w) / 2;
                state.main.y = (canvas.height - state.main.h) / 2.5;
                triggerUpdate();
            };
            img.src = f.target.result;
        };
        reader.readAsDataURL(e.target.files[0]);
    });

    // Sliders & Inputs
    const bind = (id, target, prop, isNum = false) => {
        const el = document.getElementById(id);
        el.addEventListener('input', (e) => {
            let val = e.target.value;
            if (id.includes('Opacity')) val = val / 100;
            target[prop] = isNum ? parseFloat(val) : val;
            triggerUpdate();
        });
    };

    bind('bgOpacity', state.bg, 'opacity', true);
    bind('mainOpacity', state.main, 'opacity', true);
    bind('frameColor', state.main, 'frameColor');
    bind('frameWidth', state.main, 'frameWidth', true);
    
    bind('titleText', state.title, 'text');
    bind('titleFont', state.title, 'font');
    bind('titleColor', state.title, 'color');
    
    bind('subtitleText', state.subtitle, 'text');
    bind('subtitleFont', state.subtitle, 'font');
    bind('subtitleColor', state.subtitle, 'color');

    // Sync Slider + Numeric for Font Size
    const syncSize = (sliderId, numId, target) => {
        const s = document.getElementById(sliderId);
        const n = document.getElementById(numId);
        s.addEventListener('input', (e) => { n.value = e.target.value; target.size = e.target.value; triggerUpdate(); });
        n.addEventListener('input', (e) => { s.value = e.target.value; target.size = e.target.value; triggerUpdate(); });
    };
    syncSize('titleSizeSlider', 'titleSizeNum', state.title);
    syncSize('subtitleSizeSlider', 'subtitleSizeNum', state.subtitle);

    // Random Style
    const captions = [
        {t: "Hello World", s: "Beautiful Day"},
        {t: "靜思", s: "心如止水"},
        {t: "Adventure", s: "Explore the Unknown"},
        {t: "美好時光", s: "珍藏每一刻"}
    ];
    document.getElementById('btnRandom').addEventListener('click', () => {
        const cap = captions[Math.floor(Math.random() * captions.length)];
        state.title.text = cap.t;
        state.subtitle.text = cap.s;
        state.title.color = `#${Math.floor(Math.random()*16777215).toString(16)}`;
        state.main.frameColor = "#ffffff";
        state.title.size = 50 + Math.random() * 50;
        
        document.getElementById('titleText').value = cap.t;
        document.getElementById('subtitleText').value = cap.s;
        triggerUpdate();
    });

    // Export
    document.getElementById('btnExport').addEventListener('click', () => {
        const link = document.createElement('a');
        link.download = `framed-image-${Date.now()}.png`;
        link.href = canvas.toDataURL('image/png');
        link.click();
    });

    // Initial Render
    triggerUpdate();
</script>
</body> </html>
